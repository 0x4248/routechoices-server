var ServerClock=function(n){if(!(this instanceof ServerClock))return new ServerClock(n);var e,t={url:null,...n},r=[];function o(){for(var n=0,e=0;e<r.length;e++)n+=r[e];return Math.round(n/(r.length||1))}this.stopRefreshes=function(){e&&(clearTimeout(e),e=null)},this.startRefreshes=function(){e||function n(){e=setTimeout(n,3*1e5),r=[],function n(){if(r.length<3){setTimeout(n,50);var e,o=+new Date;fetch(t.url,{method:"GET",mode:"cors",headers:{Accept:"application/json"}}).then(function(n){return n.json()}).then((e=o,function(n){var t=+new Date,o=1e3*n.time;r.push(o-(t+e)/2)})).catch(function(){})}}()}()},t.url&&this.startRefreshes(),this.now=function(){return new Date(+new Date+o())},this.getDrift=o};
