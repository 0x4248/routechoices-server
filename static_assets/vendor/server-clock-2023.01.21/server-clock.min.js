var ServerClock=function(n){if(!(this instanceof ServerClock))return new ServerClock(n);var t={url:null,interval:3e5,burstSize:3,burstInterval:.5,...n},e=[],r=null;function i(){for(var n=0,t=0;t<e.length;t++)n+=e[t];return Math.round(n/(e.length||1))}this.stopRefreshes=function(){r&&(clearTimeout(r),r=null)},this.startRefreshes=function(){r||function n(){r=setTimeout(n,t.interval),e=[],function n(){if(e.length<t.burstSize){var r=+new Date;fetch(t.url,{method:"GET",mode:"cors",headers:{Accept:"application/json"}}).then(function(n){return n.json()}).then(function(i){var u;(u=r,function(n){var t=+new Date,r=1e3*n.time;e.push(r-(t+u)/2)})(i),setTimeout(n,t.burstInterval)}).catch(function(){})}}()}()},t.url&&this.startRefreshes(),this.now=function(){return new Date(+new Date+i())},this.getDrift=i};
