{% extends "kagi/base.html" %}
{% load i18n %}

{% block content %}
{{ block.super }}

<h1>{% trans "TOTP (Authenticator) Devices" %}</h1>
{% if object_list %}
<table class="table">
  <thead>
    <tr>
      <th>{% trans 'Added on' %}</th>
      <th>{% trans 'Last used on' %}</th>
      <th>Delete</th>
    </tr>
  </thead>
  <tbody>
    {% for device in object_list %}
    <tr>
      <td>{{ device.created_at }}</td>
      {% trans 'Never' as never %}
      <td>{{ device.last_used_at|default:never}}</td>
      <td>
        <form method="post">{% csrf_token %}
          <input name="device_id" type="hidden" value="{{ device.pk }}">
          <input class="btn btn-success" type="submit" name="delete" value="X">
        </form>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% else %}
<p>
  <i class="fa fa-warning"></i> You do not have any TOTP (Authenticator) device!
</p>
{% endif %}
<a class="btn btn-primary" href="{% url 'kagi:add-totp' %}">{% trans 'Add a TOTP (Authenticator) Device' %}</a>
<p>
<a href="{% url 'kagi:two-factor-settings' %}">{% trans '&larr; Back to settings' %}</a>
</p>
{% endblock %}
